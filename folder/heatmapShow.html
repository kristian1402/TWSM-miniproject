<!DOCTYPE html>
<html>
  <head>
    <title>VR Heatmaps</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="folders.css">
  <script src="folder.js"></script>
  </head>
<body onload="loadImage()">

<h2>Heatmap</h2>

<div id="video-container"></div>

<div id="data-container"></div>

<br>

<a href="../databaseConnect.php" style="
  background-color: #332adb;
  color: white;
  padding: 14px 25px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
">Download Dataset</a>

<div class="sidenav" id="sidenav">
  <a href="../html/main.html" class="dropdown-btn">Main Menu</a>
  <a href="../runPythonScript.php" class="dropdown-btn">Test 1</a>
  <a href="heatmapShow.html" class="dropdown-btn">Test 2</a>
  <a href="heatmapShow.html" class="dropdown-btn">Test 3</a>
  <a href="heatmapShow.html" class="dropdown-btn">Test 4</a>
  <a href="heatmapShow.html" class="dropdown-btn">Test 5</a>
</div>

<script>
function loadImage(){
    // Load the XML file
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        // Get the URL of the image from the XML file
        var xmlDoc = this.responseXML;
        var dataVal = xmlDoc.evaluate("/pages/link[@id='"+xmlId+"']/stats/text()", xmlDoc, null, XPathResult.STRING_TYPE, null).stringValue;
        var vidUrl = xmlDoc.evaluate("/pages/link[@id='"+xmlId+"']/video/text()", xmlDoc, null, XPathResult.STRING_TYPE, null).stringValue;
        // Pass the URL to the img tag in the HTML code
        var vid = document.createElement("video");
        vid.controls = true;
        vid.autoplay = true;
        vid.muted = true;
        vid.src = vidUrl;
        vid.width = screen.width/2;
        vid.height = screen.height/2;
        document.getElementById("video-container").appendChild(vid);
        document.getElementById("data-container").innerHTML = xmlId;
    }
};
xhttp.open("GET", "links.xml", true);
xhttp.send();
}
</script>

</body>
</html>